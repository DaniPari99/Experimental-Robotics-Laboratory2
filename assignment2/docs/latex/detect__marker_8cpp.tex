\hypertarget{detect__marker_8cpp}{}\doxysection{src/detect\+\_\+marker.cpp File Reference}
\label{detect__marker_8cpp}\index{src/detect\_marker.cpp@{src/detect\_marker.cpp}}


noed for controlling the robot arm with the camera at the top of it in order to detect all the seven markers $\ast$  


{\ttfamily \#include $<$ros/ros.\+h$>$}\newline
{\ttfamily \#include $<$cstdlib$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include \char`\"{}std\+\_\+msgs/\+Float64.\+h\char`\"{}}\newline
{\ttfamily \#include $<$aruco/aruco.\+h$>$}\newline
{\ttfamily \#include $<$aruco/cvdrawingutils.\+h$>$}\newline
{\ttfamily \#include $<$map$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$assignment2/\+Room\+Information.\+h$>$}\newline
{\ttfamily \#include $<$assignment2/\+Room\+Connection.\+h$>$}\newline
{\ttfamily \#include $<$assignment2/\+Info\+Room.\+h$>$}\newline
{\ttfamily \#include $<$image\+\_\+transport/image\+\_\+transport.\+h$>$}\newline
{\ttfamily \#include $<$cv\+\_\+bridge/cv\+\_\+bridge.\+h$>$}\newline
{\ttfamily \#include $<$sensor\+\_\+msgs/image\+\_\+encodings.\+h$>$}\newline
Include dependency graph for detect\+\_\+marker.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{detect__marker_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_my_aruco_marker_publisher}{My\+Aruco\+Marker\+Publisher}}
\begin{DoxyCompactList}\small\item\em counter to count the seconds for temporizing the arm motion \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{detect__marker_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{detect__marker_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
int {\bfseries main} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{detect__marker_8cpp_ae3b32ecec4590e38557f4c80e5ed58ed}\label{detect__marker_8cpp_ae3b32ecec4590e38557f4c80e5ed58ed}} 
std\+\_\+msgs\+::\+Float64 {\bfseries msg}
\item 
\mbox{\Hypertarget{detect__marker_8cpp_aa955086087c767db1c717d061fefee93}\label{detect__marker_8cpp_aa955086087c767db1c717d061fefee93}} 
ros\+::\+Publisher {\bfseries joint\+\_\+1\+\_\+pose\+\_\+pub}
\item 
\mbox{\Hypertarget{detect__marker_8cpp_aa77bbe3355467d56918a7ed30af9c557}\label{detect__marker_8cpp_aa77bbe3355467d56918a7ed30af9c557}} 
ros\+::\+Publisher \mbox{\hyperlink{detect__marker_8cpp_aa77bbe3355467d56918a7ed30af9c557}{joint\+\_\+2\+\_\+pose\+\_\+pub}}
\begin{DoxyCompactList}\small\item\em publisher to the first joint topic \end{DoxyCompactList}\item 
\mbox{\Hypertarget{detect__marker_8cpp_a0e1217f6e8d3c036c67f1b1b38c57f45}\label{detect__marker_8cpp_a0e1217f6e8d3c036c67f1b1b38c57f45}} 
ros\+::\+Publisher \mbox{\hyperlink{detect__marker_8cpp_a0e1217f6e8d3c036c67f1b1b38c57f45}{joint\+\_\+3\+\_\+pose\+\_\+pub}}
\begin{DoxyCompactList}\small\item\em publisher to the second joint topic \end{DoxyCompactList}\item 
\mbox{\Hypertarget{detect__marker_8cpp_a498f626cbd242a6eb57b194ad99c6fb6}\label{detect__marker_8cpp_a498f626cbd242a6eb57b194ad99c6fb6}} 
std\+::map$<$ int, bool $>$ \mbox{\hyperlink{detect__marker_8cpp_a498f626cbd242a6eb57b194ad99c6fb6}{detected\+\_\+marker\+\_\+map}}
\begin{DoxyCompactList}\small\item\em publisher to the third joint topic \end{DoxyCompactList}\item 
\mbox{\Hypertarget{detect__marker_8cpp_a0084d000c997538e40ea5abe2d4498e3}\label{detect__marker_8cpp_a0084d000c997538e40ea5abe2d4498e3}} 
std\+::vector$<$ int $>$ \mbox{\hyperlink{detect__marker_8cpp_a0084d000c997538e40ea5abe2d4498e3}{id\+\_\+marker\+\_\+list}}
\begin{DoxyCompactList}\small\item\em map to store if a marker has been detected or not \end{DoxyCompactList}\item 
\mbox{\Hypertarget{detect__marker_8cpp_ad1fd03777e5bacc4796d4b335ebbebe7}\label{detect__marker_8cpp_ad1fd03777e5bacc4796d4b335ebbebe7}} 
ros\+::\+Service\+Client \mbox{\hyperlink{detect__marker_8cpp_ad1fd03777e5bacc4796d4b335ebbebe7}{marker\+\_\+info\+\_\+client}}
\begin{DoxyCompactList}\small\item\em vector to store the ids of the detected markers only one time \end{DoxyCompactList}\item 
\mbox{\Hypertarget{detect__marker_8cpp_a617a47c70795bcff659815ad0efd2266}\label{detect__marker_8cpp_a617a47c70795bcff659815ad0efd2266}} 
int \mbox{\hyperlink{detect__marker_8cpp_a617a47c70795bcff659815ad0efd2266}{counter}} = 0
\begin{DoxyCompactList}\small\item\em Service client to retrieve room information embedded in the marker. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
noed for controlling the robot arm with the camera at the top of it in order to detect all the seven markers $\ast$ 

\begin{DoxyAuthor}{Author}
Daniele Martino Parisi 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
12/02/2023
\end{DoxyDate}
Subscribes to\+: ~\newline
 ° /robot/camera1/image\+\_\+raw $\ast$ Publishes to\+: ~\newline
 ° /robot/joint1\+\_\+position\+\_\+controller/command

° /robot/joint2\+\_\+position\+\_\+controller/command

° /robot/joint3\+\_\+position\+\_\+controller/command

° /info/rooms

Services \+: ~\newline
 ° /\+Room\+Information $\ast$ Description \+: $\ast$ This node make the robot detecting all the seven markers associating to the seven locations by controlling the robot in order to make two 360 degrees loops\+: the first to detect the 4 markers at the bottom and the second to detect the other 3 at the top. The node then publishes the informations about the locations on the topic /info/rooms. 